# 功能 PRD：发送时追加剪贴板内容

|**文档版本**|**V1.0**|
|---|---|
|**功能名称**|发送时追加剪贴板内容|
|**所属产品**|Prompt Launcher|
|**目标平台**|Windows (Tauri Desktop)|
|**优先级**|P1|
|**负责人**|待定|
|**创建日期**|2026-01-27|

---

## 1. 背景与问题

在“生图提示词”场景中，用户通常会先复制一段需要参与生成的文本（如描述文段），再通过 Prompt Launcher 选择或触发某条提示词发送。当前流程只会发送提示词本身，不会附带剪贴板内容，导致用户需要手动粘贴文本并重新组织提示词，增加重复操作成本。

## 2. 目标与非目标

### 2.1 目标
- 在发送提示词时，**可选**自动追加剪贴板内容，减少用户重复操作。
- 提供一个设置开关，允许用户控制是否启用该能力。
- 无论通过鼠标点击发送还是快捷键发送，行为一致。

### 2.2 非目标
- 不改变剪贴板内容本身。
- 不做剪贴板历史管理或回溯。
- 不对剪贴板内容进行结构化解析或格式化。

## 3. 用户故事

- 作为需要频繁生成图片的用户，我希望在发送提示词时自动附带当前剪贴板文本，以便直接将文段与提示词一起发送，无需重复粘贴。

## 4. 功能需求

### 4.1 开关设置
- 位置：设置面板新增开关。
- 名称建议："发送时追加剪贴板内容"。
- 默认值：关闭。
- 说明文案建议："开启后，发送提示词时会在末尾追加当前剪贴板文本"。

### 4.2 触发时机
- 当用户触发“发送提示词”的动作时生效（包括鼠标点击发送、快捷键发送）。
- 与当前发送路径一致，不引入新的入口。

### 4.3 追加规则
- 若开关关闭：行为不变，仅发送提示词内容。
- 若开关开启：
  - 读取当前剪贴板文本。
  - 若剪贴板为空或不可读：忽略，不影响发送。
  - 若剪贴板有内容：**追加在提示词末尾**。

### 4.4 分隔规则
- 默认追加分隔符：`\n\n---\n\n`。
- 允许后续迭代为可配置项（非本期需求）。

## 5. 交互与体验

- 用户开启开关后，不新增额外确认弹窗。
- 发送行为保持流畅，不增加阻断流程。
- 若剪贴板为空：无提示，直接发送提示词。

## 6. 兼容性与性能

- 仅影响发送流程，无需修改搜索或索引逻辑。
- 剪贴板读取应为同步或轻量级异步，不显著阻塞发送体验。

## 7. 安全与隐私

- 仅读取本地剪贴板内容，不上传或持久化。
- 不记录剪贴板历史。

## 8. 验收标准

- 开关关闭时：发送内容与当前版本一致。
- 开关开启时：发送内容为“提示词 + 分隔符 + 剪贴板内容”。
- 剪贴板为空时：只发送提示词，且无错误提示。
- 鼠标点击发送与快捷键发送行为一致。

## 9. 影响范围与依赖

- 前端设置面板（新增开关）。
- 发送逻辑（读取剪贴板并拼接）。
- 配置存储（新增布尔字段）。

## 10. 风险与对策

| 风险 | 影响 | 对策 |
| --- | --- | --- |
| 剪贴板内容过长 | 发送内容过大，体验变慢 | 后续可加长度限制或提示（不在本期） |
| 用户不知拼接行为 | 产生困惑 | 清晰的开关文案与默认关闭 |

---

## 11. 版本记录

- V1.0: 初版需求定义，明确开关、触发时机与拼接规则。
