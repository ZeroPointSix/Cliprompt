# 决策日志（ADR Lite）

## 2026-01-20 19:56:01

### 决策 1：标签以 `.tags.json` 为准
- 背景：需要支持批量添加/移除标签，不能依赖文件名重命名。
- 选择：在 `prompts_dir` 下维护 `.tags.json`，作为标签的权威来源；文件名/目录标签作为兜底。
- 影响：标签可稳定维护，但文件手动改名会导致映射失效（按相对路径存储）。

### 决策 2：新建空文件延迟可见
- 背景：需求要求“保存并关闭后才纳入搜索结果”。
- 选择：新建文件加入 pending 列表，文件为空时不进入索引；首次保存（非空）后展示。
- 影响：更贴近用户预期，但空文件会暂时不可搜索。

## 2026-01-20 20:11:03

### 决策 3：交互元素使用语义化标签
- 背景：Svelte a11y 警告提示点击事件缺少键盘处理与角色定义。
- 选择：将结果行替换为 `button`，并用 `pointerdown` 处理遮罩与菜单的事件阻断。
- 影响：提升可访问性与开发期质量基线，减少警告噪音。

## 2026-01-20 22:32:10

### 决策 4：启用 MSI 升级码以支持就地升级
- 背景：需要安装新版本时自动替换旧版本，并保留用户配置数据。
- 选择：在 `tauri.conf.json` 设置固定 `wix.upgradeCode`，并禁用降级安装。
- 影响：MSI 安装包可执行就地升级，用户数据仍保留在 AppConfig 目录。
